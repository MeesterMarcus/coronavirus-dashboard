<div class="jumbotron"><h2>COVID-19 Statistics</h2></div>

<div *ngIf="summary">
  <!--  Global Summary -->
  <section>
    <h4>Global Statistics for {{summary.Date | date}}</h4>
    <div class="row">
      <div class="col-md-4 card">
        <div class="orange">
          Total confirmed cases:
        </div>
        <span>{{summary.Global.TotalConfirmed | number}}</span>
      </div>
      <div class="col-md-4 card">
        <div class="red">
          Total deaths:
        </div>
        <span>{{summary.Global.TotalDeaths | number}}</span>
      </div>
      <div class="col-md-4 card">
        <div class="green">
          Total recovered cases:
        </div>
        <span>{{summary.Global.TotalRecovered | number}}</span>
      </div>
    </div>
  </section>

  <hr class="solid">

  <!--  US Specific Statistics-->
  <section>
    <h4 class="header-margin">US Specific Statistics</h4>
    <div class="row" *ngIf="!usStatistics">Loading...</div>
    <div class="row" *ngIf="usStatistics">
      <div class="col-md-4 card">
        <div>
          Positive Tests:
        </div>
        <span>{{usStatistics[0].positive | number}}</span>
      </div>
      <div class="col-md-4 card">
        <div>
          Negative Tests:
        </div>
        <span>{{usStatistics[0].negative | number}}</span>
      </div>
      <div class="col-md-4 card">
        <div>
          On Ventilator Currently:
        </div>
        <span>{{usStatistics[0].onVentilatorCurrently | number}}</span>
      </div>
      <div class="col-md-4 card">
        <div>
          Hospitalized Currently:
        </div>
        <span>{{usStatistics[0].hospitalizedCurrently | number}}</span>
      </div>
      <div class="col-md-4 card">
        <div>
          In ICU Currently:
        </div>
        <span>{{usStatistics[0].inIcuCurrently | number}}</span>
      </div>
      <div class="col-md-4 card">
        <div>
          Pending:
        </div>
        <span>{{usStatistics[0].pending | number}}</span>
      </div>

      <app-graph
        [data]="usDaily"
        [graphColor]="'red'"
        [xAxisLabel]="'Date'"
        [yAxisLabel]="'New Deaths'">
      </app-graph>

    </div>
  </section>

  <hr class="solid">

  <!--  Country Summary Statistics-->
  <section>
    <h4 class="header-margin">Summary for {{countryStats.Country}}</h4>
    <div class="row">
      <input [(ngModel)]="selectedCountry"
             [typeahead]="countries"
             placeholder="Enter country name"
             (typeaheadOnSelect)="retrieveCountry($event)"
             typeaheadOptionField="Country"
             class="form-control country-select">
    </div>

    <div class="row" *ngIf="countryStats">
      <div class="col-md-4 card">
        <div class="orange">
          Total confirmed cases:
        </div>
        <span>{{countryStats.TotalConfirmed | number}}</span>
      </div>
      <div class="col-md-4 card">
        <div class="red">
          Total deaths:
        </div>
        <span>{{countryStats.TotalDeaths | number}}</span>
      </div>
      <div class="col-md-4 card">
        <div class="green">
          Total recovered cases:
        </div>
        <span>{{countryStats.TotalRecovered | number}}</span>
      </div>
    </div>

    <div class="row">
      <button type="button" class="btn btn-primary button-toggle ml-auto mr-3"
              (click)="isCollapsed = !isCollapsed"
              [attr.aria-expanded]="!isCollapsed" aria-controls="collapseBasic">
        <span *ngIf="isCollapsed">
          Show Charts
        </span>
        <span *ngIf="!isCollapsed">
          Hide Charts
        </span>
      </button>
    </div>

    <div class="row" *ngIf="!countryConfirmedDayOne || !countryDeathsDayOne || !countryRecoveredDayOne">Loading...</div>
    <div id="collapseBasic" [collapse]="isCollapsed">

      <app-graph
        [data]="countryConfirmedDayOne"
        [graphColor]="'orange'"
        [xAxisLabel]="'Date'"
        [yAxisLabel]="'Confirmed Cases'">
      </app-graph>

      <app-graph
        [data]="countryDeathsDayOne"
        [graphColor]="'red'"
        [xAxisLabel]="'Date'"
        [yAxisLabel]="'Deaths'">
      </app-graph>

      <app-graph
        [data]="countryRecoveredDayOne"
        [graphColor]="'green'"
        [xAxisLabel]="'Date'"
        [yAxisLabel]="'Recovered'">
      </app-graph>

    </div>
  </section>
</div>



